<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.3/vue.min.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.7.13/dist/vue.js"></script>
  <title>sync</title>
</head>
<body>
  <!-- 這邊 outerCount是data裡的值-->
  <div id="app"> 
    <my-counter :outer-countprops="outerCount" @update="setOuterCount"></my-counter>
    <h1>{{outerCount}}</h1>
  </div>

  <script>
    Vue.component('my-counter', {
      props:['outerCountprops'],
      data(){
        return {
          innerCount: this.outerCountprops, //props
        };
      },
      template: `
        <div><h1>{{innerCount}}</h1>
          <button @click="innerCount+=1">+1</button>
          <button @click="sync">sync</button>
        </div>
      `,
      methods: {
        sync(){
          this.$emit('update', this.innerCount) //(func名稱,參數)
        }
      },
    });

    new Vue({
      el:'#app',
      data: {
        outerCount: 10,
      },
      methods: {
        setOuterCount(count) {
          this.outerCount = count;
        }
      }
    });
    /* 下層my-counter 透過emit傳遞事件給上層，用@綁定 
      setOuterCount 是上層定義的func名稱,(count)是下層傳來的  this.$emit('update', this.innerCount)
      所以this.innerCount 變成多少 
      這裡面 setOuterCount就會變多少
    */

    
  </script>
</body>
</html>